#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// #wortmann { 
	// Устанавливаем отбор для РС гф_СтрокиДокументаДанныеЗагрузки по Ссылке 
	// Галфинд_Домнышева 2022/09/19
	
	ЭлементОтбора = СтрокиРС.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	ЭлементОтбора.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Документ");
	ЭлементОтбора.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;
	ЭлементОтбора.Использование = Истина;
	ЭлементОтбора.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
	ЭлементОтбора.ПравоеЗначение = Объект.Ссылка;
	
	// } #wortmann

КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	// #wortmann { 
	// Вызов процедур на Сервере для контроля доступности кнопок и правильного отображения значений ТЧ 
	// Галфинд_Домнышева 2022/09/19
	ДоступностьКнопок();
	// } #wortmann
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// #wortmann { 
// Устанавливает доступность кнопок формы 
// Галфинд_Домнышева 2022/09/19
&НаКлиенте
Процедура ДоступностьКнопок() 
	
	Если ЗначениеЗаполнено(Объект.Ссылка) Тогда 			
		Если СтатусУДокументаЗагружен() Тогда
			Элементы.СтрокиРС.КоманднаяПанель.ПодчиненныеЭлементы.СтрокиРСЗагрузить.Доступность = Ложь;
		КонецЕсли;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Объект.Ссылка) Тогда 
		Если ИнтерфейсУДокументаPRICAT() Тогда
			Элементы.СтрокиРС.КоманднаяПанель.ПодчиненныеЭлементы.ОбработкаPricat.Доступность = Истина; 
		КонецЕсли;
	Иначе	
		Элементы.СтрокиРС.КоманднаяПанель.ПодчиненныеЭлементы.ОбработкаPricat.Доступность = Ложь;
	КонецЕсли;
	
	//Модифицированность = Истина;
	
КонецПроцедуры// } #wortmann

// #wortmann { 
// Функция получает реквизит СтатусДокумента и возваращает Истина или Ложь
// Галфинд_Домнышева 2022/09/19
//
// Возвращаемое значение:
//  - Булево - возвращает Истина, если найденный статусДокумента соответсвует значениям Загружено ил ЗагруженоСОшибками
&НаСервере
Функция СтатусУДокументаЗагружен()
	 
	 Возврат Объект.СтатусДокумента = Перечисления.гф_СтатусыДокументовЗагрузки.Загружено
	 	Или Объект.СтатусДокумента = Перечисления.гф_СтатусыДокументовЗагрузки.ЗагруженоСОшибками;

КонецФункции// } #wortmann

// #wortmann { 
// Функция получает реквизит Интерфейс и возваращает Истина или Ложь
// Галфинд_Домнышева 2022/09/19
//
// Возвращаемое значение:
//  - Булево - возвращает Истина, если найденный Интерфейс соответсвует значению PRICAT
&НаСервере
Функция ИнтерфейсУДокументаPRICAT()
 
	 Возврат Объект.Интерфейс = Перечисления.гф_Интерфейсы.PRICAT;

КонецФункции// } #wortmann

#КонецОбласти