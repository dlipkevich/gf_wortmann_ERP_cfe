Процедура ПараметрыФормыДобавитьТЧТоварыВКоробах(ПараметрыФормы, ПараметрКоманды) Экспорт
	// Галфинд СадомцевСА 12.02.2024
	// e1cib/data/Задача.ЗадачаИсполнителя?ref=8eabb083fed1320811eec96fbdb98554
	СкладКоробной = УправлениеСвойствами.ЗначениеСвойства(ПараметрКоманды.Склад, "гф_СкладыТоварыВКоробах") = Истина;
	Если НЕ СкладКоробной Тогда
		Возврат;
	КонецЕсли;
	тчТоварыВКоробах = Новый ТаблицаЗначений;
	тчТоварыВКоробах.Колонки.Добавить("ВариантКомплектации");
	тчТоварыВКоробах.Колонки.Добавить("Количество");
	тчТоварыВКоробах.Колонки.Добавить("Цена");
	тчТоварыВКоробах.Колонки.Добавить("СтавкаНДС");
	тчТоварыВКоробах.Колонки.Добавить("СуммаНДС");
	тчТоварыВКоробах.Колонки.Добавить("Сумма");
	тчТоварыВКоробах.Колонки.Добавить("ЗаказКлиента");
	ОтборСтрок = Новый Структура("Отменено", Ложь);
	НайденныеСтроки = ПараметрКоманды.гф_ТоварыВКоробах.НайтиСтроки(ОтборСтрок);
	Для Каждого СтрокаТЧ Из НайденныеСтроки Цикл
		Если СтрокаТЧ.Количество = 0 Тогда
			Продолжить;
		КонецЕсли;
		нс = тчТоварыВКоробах.Добавить();
		нс.ВариантКомплектации = СтрокаТЧ.ВариантКомплектации;
		нс.Количество = СтрокаТЧ.Количество;
		нс.Цена = СтрокаТЧ.ЦенаКоробаСоСкидкой;
		нс.СтавкаНДС = СтрокаТЧ.СтавкаНДС;
		нс.СуммаНДС = СтрокаТЧ.СуммаНДС;
		нс.Сумма = СтрокаТЧ.СуммаСНДС;
		нс.ЗаказКлиента = ПараметрКоманды;
	КонецЦикла;
	ХЗ = Новый ХранилищеЗначения(тчТоварыВКоробах);
	ПараметрыФормы.Вставить("гф_ТоварыВКоробах", ХЗ);
КонецПроцедуры
