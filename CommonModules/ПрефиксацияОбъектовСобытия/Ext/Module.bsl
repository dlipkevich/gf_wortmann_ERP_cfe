
&После("УстановитьПрефикс")
Процедура гф_УстановитьПрефикс(Источник, Префикс, УстановитьПрефиксИнформационнойБазы, УстановитьПрефиксОрганизации)
	
	Если ТипЗнч(Источник) = Тип("ДокументОбъект.РасходныйОрдерНаТовары") Тогда 
		
		Запрос = Новый Запрос;
		Запрос.Текст = 
		"ВЫБРАТЬ
		|	Организации.Префикс КАК Префикс
		|ИЗ
		|	Справочник.Склады КАК Склады
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Организации КАК Организации
		|		ПО Склады.гф_Организация = Организации.Ссылка
		|ГДЕ
		|	Склады.Ссылка = &Ссылка";
		
		Запрос.УстановитьПараметр("Ссылка", Источник.Склад);
		
		РезультатЗапроса = Запрос.Выполнить();
		
		ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
		
		Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
			
			ПрефиксОрганизации = "";
			
			Если Не ВыборкаДетальныеЗаписи.Префикс = "" Тогда
				ПрефиксОрганизации = ВыборкаДетальныеЗаписи.Префикс;
			КонецЕсли;
			
			Если ЗначениеЗаполнено(ПрефиксОрганизации) Тогда
				Префикс = ПрефиксОрганизации + Префикс;
			КонецЕсли;
			
			Прервать;
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецПроцедуры
