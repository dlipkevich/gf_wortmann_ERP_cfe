
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если не ЗначениеЗаполнено(Объект.Ссылка) Тогда
		Элементы.Ключ.ОтображениеПредупрежденияПриРедактировании = ОтображениеПредупрежденияПриРедактировании.НеОтображать;
	КонецЕсли;
	
	Если Объект.ТипЗначения.Типы().Количество() > 1 Тогда
		Объект.ТипЗначения = новый ОписаниеТипов("СправочникСсылка.Контрагенты");
		Объект.Значение = Элементы.Значение.ОграничениеТипа.ПривестиЗначение(Объект.Значение);
	КонецЕсли;
	вУстановитьВидимостьДоступность();
КонецПроцедуры

&НаСервере
Процедура вУстановитьВидимостьДоступность()
	Возврат;
	
	Если ЭтаФорма.ТолькоПросмотр Тогда
		Возврат;
	КонецЕсли;
	
	пРежимСписка = ВРег(Прав(Объект.Ключ, 7)) = "_СПИСОК";
	
	Если не пРежимСписка Тогда
		Элементы.Список.ТолькоПросмотр = истина;
	Иначе
		Элементы.Список.ТолькоПросмотр = ложь;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура КлючПриИзменении(Элемент)
	вУстановитьВидимостьДоступность();
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	Оповестить("ИзмененоГлобальноеЗначение", Объект.Ссылка);
КонецПроцедуры
